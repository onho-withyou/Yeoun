<th:block xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layouts/layout.html}">
	<head>
		<style>
			#clientResult {
		    max-height: 180px;
		    overflow-y: auto;
		    background-color: white;
		    z-index: 9999;
			}
			
			#clientSearch:focus {
			    border-color: #6ea8fe;
			    box-shadow: 0 0 6px rgba(110, 168, 254, 0.5);
			}
		</style>
	</head>
	<body>
		<div class="custom-body container-xxl flex-grow-1 container-p-y" layout:fragment="content">
			<h2>발주 관리</h2>
			<div class="row g-2 align-items-center">
				<!-- 검색 조건들 묶음 -->
				<div
					class="col-12 col-lg-auto d-flex flex-wrap align-items-center gap-2">
					<!-- 날짜 -->
					<div class="d-flex align-items-center gap-2">
						<input type="date" class="form-control" id="startDate"
							style="width: 140px;"> <span>~</span> <input type="date"
							class="form-control" id="endDate" style="width: 140px;">
					</div>
					<!-- 키워드 -->
					<input type="text" class="form-control" placeholder="이름 또는 협력사"
						id="keyword" style="width: 200px;">
					<!-- 조회 버튼 -->
					<button class="btn btn-outline-primary" id="btnSearch">검색</button>
				</div>
				<!-- 오른쪽: 발령 등록 버튼 -->
				<div class="col-12 col-lg d-flex justify-content-lg-end">
					<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalCenter"> 발주 등록 </button>
				</div>
			</div>
			<br>
			<div class="card-body p-0">
				<div id="grid"></div>
			</div>
			<br>
			<div class="modal fade" id="modalCenter" tabindex="-1" style="display: none;" aria-hidden="true">
				<div class="modal-dialog modal-xl modal-dialog-centered" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="modalCenterTitle">발주등록</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<div id="purchaseForm">
								<div class="row mb-6">
									<div class="col mb-0">
										<label class="form-label">거래처</label>
										<div class="position-relative" >
										    <input type="text" class="form-control" id="clientSearch" placeholder="거래처 검색">
										    <ul class="list-group position-absolute w-100 shadow-sm mt-1 d-none" id="clientResult"></ul>
										</div>
										
										<input type="hidden" name="clientId" id="clientId">
									</div>
									<div class="col mb-0">
										<label class="form-label">담당자</label>
										<input class="form-control" type="text" id="managerName" name="managerName" readonly/>
									</div>
								</div>
								<div class="row mb-6">
									<div class="col mb-0">
										<label class="form-label">발주품목</label>
										<select class="form-select" name="materialOrderItem" id="itemSelect" disabled></select>
									</div>
									<div class="col mb-0">
										<label class="form-label">납기일자</label>
										<input class="form-control" type="date" id="dueDate" name="dueDate"/>
									</div>
								</div>
								<hr>
								<table class="table" id="orderTable">
									<thead>
										<tr>
											<th>품목명</th>
											<th>최소수량</th>
											<th>주문수량</th>
											<th>단가</th>
											<th>공급가액</th>
											<th>부가세</th>
											<th>합계</th>
											<th></th>
										</tr>
									</thead>
									<tbody></tbody>
								</table>
								<div class="modal-footer mt-3 p-0">
									<button type="button" class="btn btn-primary" onclick="submitOrder()">등록</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<nav aria-label="">
				<ul class="pagination justify-content-center" id=""></ul>
			</nav>
		</div>
		<th:block layout:fragment="myScript">
			<script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script>
			<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
			<script src="/js/purchase/purchase_regist.js"></script>
		</th:block>
	</body>
</th:block>