<th:block xmlns:th="http://www.thymeleaf.org"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
          layout:decorate="~{/layouts/layout.html}">

<th:block layout:fragment="content">

<div class="custom-body container-xxl flex-grow-1 container-p-y">

    <h2>ê¸‰ì—¬ ì´ë ¥ ì¡°íšŒ</h2>

    <!-- ========================== -->
    <!-- ğŸ” ê²€ìƒ‰ ì˜ì—­ -->
    <!-- ========================== -->
    <div class="row g-2 align-items-center">

        <!-- ê²€ìƒ‰ ì¡°ê±´ (ì™¼ìª½) -->
        <div class="col-12 col-lg-auto d-flex flex-wrap align-items-center gap-2">

            <!-- ì¡°íšŒ ëª¨ë“œ -->
            <select id="mode" class="form-select" style="width:150px;">
                <option value="emp">ì‚¬ì› ê¸°ì¤€</option>
                <option value="dept">ë¶€ì„œ ê¸°ì¤€</option>
                <option value="month">ì›”ë³„ ê¸°ì¤€</option>
            </select>

            <!-- ì‚¬ë²ˆ/ì´ë¦„ -->
            <input type="text" id="keyword" class="form-control"
                   placeholder="ì‚¬ë²ˆ ë˜ëŠ” ì‚¬ì›ëª…" style="width:160px;">

            <!-- ë¶€ì„œëª… -->
            <input type="text" id="deptName" class="form-control"
                   placeholder="ë¶€ì„œëª…" style="width:160px; display:none;">

            <!-- ì—°ë„ -->
            <select id="year" class="form-select" style="width:100px;"></select>

            <!-- ì›” -->
            <select id="month" class="form-select" style="width:100px;"></select>

            <!-- ì¡°íšŒ ë²„íŠ¼ -->
            <button class="btn btn-primary" id="btnSearch">ì¡°íšŒ</button>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ë²„íŠ¼ -->
        <div class="col-12 col-lg d-flex justify-content-lg-end">
            <button class="btn btn-secondary" id="btnReset">ì´ˆê¸°í™”</button>
        </div>

    </div>

    <br>

    <!-- ========================== -->
    <!-- ğŸ“Š AG Grid -->
    <!-- ========================== -->
    <div class="card-body p-0">
        <div id="payslipGrid" class="ag-theme-alpine"
             style="height:420px; width:100%;"></div>
    </div>

    <br>

    <!-- ========================== -->
    <!-- ğŸ“„ í˜ì´ì§€ë„¤ì´ì…˜ -->
    <!-- ========================== -->
    <nav aria-label="ê¸‰ì—¬ ì´ë ¥ í˜ì´ì§€ë„¤ì´ì…˜">
        <ul class="pagination justify-content-center" id="payPagination"></ul>
    </nav>

</div>

<!-- ========================== -->
<!-- JS í¬í•¨ -->
<!-- ========================== -->
<script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
<script src="/js/pay/payHistoryList.js"></script>

<!-- ğŸ”¥ ì—°ë„/ì›” ìë™ ìƒì„± ìŠ¤í¬ë¦½íŠ¸ -->
<script>
document.addEventListener("DOMContentLoaded", () => {

    // í˜„ì¬ ì—°ë„
    const thisYear = new Date().getFullYear();
    const yearSelect = document.getElementById("year");

    // ì˜¬í•´, ì‘ë…„ë§Œ ë„£ê¸°
    yearSelect.innerHTML = `
        <option value="">ì—°ë„</option>
        <option value="${thisYear}">${thisYear}</option>
        <option value="${thisYear - 1}">${thisYear - 1}</option>
    `;

    // ì›” 1~12 ìë™ ìƒì„±
    const monthSelect = document.getElementById("month");
    let monthHtml = `<option value="">ì›”</option>`;
    for (let i = 1; i <= 12; i++) {
        const v = i.toString().padStart(2, "0");
        monthHtml += `<option value="${v}">${i}ì›”</option>`;
    }
    monthSelect.innerHTML = monthHtml;

});
</script>

</th:block>
</th:block>
