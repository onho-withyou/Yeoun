<th:block xmlns:th="http://www.thymeleaf.org"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
          layout:decorate="~{/layouts/layout.html}">

  <!-- 하나의 fragment 안에 전부 포함 -->
  <th:block layout:fragment="content">
    <!-- CSS -->
    <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css">

    <div class="custom-body container-xxl flex-grow-1 container-p-y">
      <h2>사원 목록</h2>

      <!-- 검색 바 -->
      <div class="row align-items-center g-2 mb-3">
        <div class="col-12 col-lg-9">
          <form class="row g-2 align-items-center" onsubmit="return false" role="search">
            <div class="col-12 col-md-auto">
              <input class="form-control" id="kw" type="search"
                     placeholder="사번 / 성명 / 부서 / 직급 / 이메일 검색" style="width:280px;">
            </div>
            <div class="col-6 col-md-auto">
              <select class="form-select" id="deptId">
                <option value="">부서 전체</option>
                <option>개발부</option>
                <option>마케팅부</option>
                <option>생산부</option>
                <option>영업부</option>
                <option>인사부</option>
              </select>
            </div>
            <div class="col-6 col-md-auto d-grid">
              <button class="btn btn-outline-primary" id="btnSearch" type="button">Search</button>
            </div>
          </form>
        </div>
        <div class="col-12 col-lg-3 d-grid d-lg-flex justify-content-lg-end">
          <a href="/emp/regist" class="btn btn-primary">인사 등록</a>
        </div>
      </div>
      
      <!-- 사원 상세 정보 모달 -->
		<div class="modal fade" id="empDetailModal" tabindex="-1" aria-hidden="true">
		  <!-- modal-xl : 더 넓은 폭 / centered : 수직 중앙 -->
		  <div class="modal-dialog modal-dialog-centered emp-detail-modal">
		  <div class="modal-content">
		    <div class="modal-header">
		      <h5 class="modal-title fw-bold">사원 상세</h5>
		      <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
		    </div>
		
		    <div class="modal-body">
		      <div class="container-fluid">
		        <div class="row g-4">
		          
				<!-- 왼쪽: 핵심 정보 -->
				<div class="col-lg-12">
				  <!-- 섹션: 기본 정보 -->
				  <div class="mb-3">
				    <div class="d-flex align-items-center mb-2">
				      <span class="fw-semibold me-2">기본 정보</span>
				      <div class="flex-grow-1 border-top"></div>
				    </div>
				
				    <!-- 사진 + 텍스트 묶음 -->
				    <div class="d-flex align-items-start gap-4">
				      <!-- 프로필 사진 -->
				      <div class="flex-shrink-0">
				        <img id="d-photo"
				             src="/img/default-profile.png"
				             alt="프로필 사진"
				             class="rounded"
				             style="width: 120px; height: 120px; object-fit: cover;">
				      </div>
				
				      <!-- 기본 정보 텍스트 -->
				      <div class="flex-grow-1">
				        <div class="row gy-2 gx-3">
				          <div class="col-md-6">
				            <div class="text-secondary small">이름</div>
				            <div id="d-empName" class="fw-semibold fs-6">—</div>
				          </div>
				          <div class="col-md-6">
				            <div class="text-secondary small">사번</div>
				            <div id="d-empId" class="fw-semibold fs-6">—</div>
				          </div>
				          <div class="col-md-6">
				            <div class="text-secondary small">부서</div>
				            <div id="d-deptName">—</div>
				          </div>
				          <div class="col-md-6">
				            <div class="text-secondary small">직급</div>
				            <div id="d-posName">—</div>
				          </div>
				          <div class="col-md-6">
				            <div class="text-secondary small">성별</div>
				            <div id="d-gender">—</div>
				          </div>
				          <div class="col-md-6">
				            <div class="text-secondary small">입사일</div>
				            <div id="d-hireDate">—</div>
				          </div>
				        </div>
				      </div>
				    </div>
				    <!-- /사진 + 텍스트 묶음 -->
				  </div>
				
				  <!-- 섹션: 연락/계정 -->
				  <div class="mb-3">
				    <div class="d-flex align-items-center mb-2">
				      <span class="fw-semibold me-2">연락/계정</span>
				      <div class="flex-grow-1 border-top"></div>
				    </div>
				    <div class="row gy-2 gx-3">
				      <div class="col-md-6">
				        <div class="text-secondary small">연락처</div>
				        <div id="d-mobile">—</div>
				      </div>
				      <div class="col-md-6">
				        <div class="text-secondary small">이메일</div>
				        <div id="d-email">—</div>
				      </div>
				      <div class="col-12">
				        <div class="text-secondary small">주소</div>
				        <div id="d-address">—</div>
				      </div>
				    </div>
				  </div>
				
				  <!-- 섹션: 민감정보(마스킹) -->
				  <div class="mb-1">
				    <div class="d-flex align-items-center mb-2">
				      <span class="fw-semibold me-2">민감 정보(마스킹)</span>
				      <div class="flex-grow-1 border-top"></div>
				    </div>
				    <div class="row gy-2 gx-3">
				      <div class="col-md-6">
				        <div class="text-secondary small">주민등록번호</div>
				        <div id="d-rrn" class="text-body">—</div>
				      </div>
				      <div class="col-md-6">
				        <div class="text-secondary small">급여통장</div>
				        <div id="d-bank" class="text-body" style="white-space: pre-line;">—</div>
				      </div>
				    </div>
				    <div class="text-muted small mt-2">
				      ※ 주민등록번호/계좌는 마스킹 상태로만 노출됩니다.
				    </div>
				  </div>
				</div>

		
		        </div><!-- /row -->
		      </div><!-- /container-fluid -->
		    </div>
		
		    <div class="modal-footer">
		      <button type="button" class="btn btn-primary" id="editBtn">수정</button>
		      <button class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
		    </div>
		    
		  </div>
		</div>
	  </div>

      <!-- 그리드 DOM 반드시 포함 -->
      <div id="grid" style="height:600px;"></div>
    </div>
  </th:block>

<!-- JS -->
<th:block layout:fragment="myScript">
    <script src="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.js"></script>
    <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
	<script src="/js/emp/empList.js"></script>
</th:block>