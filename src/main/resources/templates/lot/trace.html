<th:block xmlns:th="http://www.thymeleaf.org"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
          layout:decorate="~{/layouts/layout.html}">

  <th:block layout:fragment="content">
    <div class="custom-body container-xxl flex-grow-1 container-p-y">

      <!-- 페이지 타이틀 -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="mb-0">LOT 추적</h3>
        <!-- 필요하면 여기에 우측 상단 버튼 추가 (엑셀다운, 전체조회 등) -->
      </div>

      <!-- LOT 검색 필터 -->
<!--       <div class="card mb-4"> -->
<!--         <div class="card-body"> -->
          <form id="lotTraceSearchForm">
            <div class="row gx-3 gy-2 align-items-end">

              <!-- LOT / 제품 검색어 -->
              <div class="col-md-4">
                <label class="form-label" for="searchKeyword">LOT 번호 / 제품 코드</label>
                <input type="text"
                       class="form-control"
                       id="searchKeyword"
                       placeholder="LOT 번호 또는 제품 코드를 입력하세요">
              </div>

              <!-- 생산 상태 -->
              <div class="col-md-3">
                <label class="form-label" for="searchProduct">생산 상태</label>
                <select class="form-select" id="searchProduct">
                  <option value="">전체</option>
                  <!-- 진행중, 완료, 보류 등 옵션 예정 -->
                </select>
              </div>

              <!-- 제품 유형 -->
              <div class="col-md-3">
                <label class="form-label" for="searchHStatus">제품 유형</label>
                <select class="form-select" id="searchHStatus">
                  <option value="">전체</option>
                  <!-- 완제품, 반제품, 원자재 등 -->
                </select>
              </div>

              <!-- 검색 버튼 -->
              <div class="col-md-2">
                <button type="button"
                        class="btn btn-outline-primary w-100"
                        id="btnSearch">
                  검색
                </button>
              </div>

            </div>
          </form>
<!--         </div> -->
<!--       </div> -->

	<br>

      <!-- 위치 / 실사 영역 -->
      <div class="row">
      
	    <!-- LOT 계층구조 (좌측) -->
	    <div class="col-md-5">
	      <div class="card h-100">
	        <div class="card-header">
	          <h5 class="mb-0">LOT 계층구조</h5>
	        </div>
	        <div class="card-body" id="lotTree">
	        
	        <ul class="list-group">

  <!-- lotList = List<LotRootDTO> -->
  <li class="list-group-item"
      th:each="lot : ${lotList}">
    
    <!-- 클릭 시 해당 LOT_NO를 쿼리 파라미터로 넘겨서 선택 LOT 변경 -->
    <a th:href="@{/lot/trace(lotNo=${lot.lotNo})}"
       th:classappend="${selectedLot != null and selectedLot.lotNo == lot.lotNo}
                       ? ' fw-bold text-primary'">
      
      <!-- LOT 번호 -->
      <span th:text="${lot.lotNo}"></span>

      <!-- 제품명 (혹은 prdId) -->
      <span th:text="' / ' + ${lot.displayName}"></span>

      <!-- 상태 -->
      <span th:text="' / ' + ${lot.status}"></span>
    </a>
  </li>

</ul>
	        
	        
	          <!-- LOT 트리 넣을 자리 (지금은 비워두기) -->
	        </div>
	      </div>
	    </div>
	
	    <!-- LOT 상세 (우측) -->
	    <div class="col-md-7">
	      <div class="card h-100">
	        <div class="card-header">
	          <h5 class="mb-0">LOT 상세</h5>
	        </div>
	        <div class="card-body" id="lotDetail">
	          <!-- LOT 상세 정보 들어갈 자리 (지금은 비워두기) -->
	        </div>
	      </div>
	    </div>
    	</div>

      <!-- 나중에 LOT 이력/타임라인, TOAST UI Grid 붙일 자리 -->
      <!--
      <div class="card">
        <div class="card-body p-0">
          <div id="grid"></div>
        </div>
      </div>
      -->

    </div>
  </th:block>
</th:block>