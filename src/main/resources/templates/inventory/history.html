<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout}">

<head>
    <title>재고 관리 - 재고 이력</title>
    <!-- Inventory Specific CSS -->
    <link rel="stylesheet" th:href="@{/css/inventory/inventory.css}" />
</head>

<th:block layout:fragment="content">
    <div class="container-xxl flex-grow-1 container-p-y">
        <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">재고 관리 /</span> 재고 이력</h4>

        <!-- Search Filter -->
        <div class="card mb-4">
            <div class="card-body">
                <form id="historySearchForm">
                    <div class="row gx-3 gy-2 align-items-center">
                        <div class="col-md-3">
                            <label class="form-label" for="searchHistoryType">유형</label>
                            <select class="form-select" id="searchHistoryType">
                                <option value="">전체</option>
                                <option value="IN">입고</option>
                                <option value="OUT">출고</option>
                                <option value="MOVE">이동</option>
                                <option value="DISPOSAL">폐기</option>
                                <option value="ADJUST">조정</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label" for="searchHistoryDate">기간</label>
                            <input type="date" class="form-control" id="searchHistoryDate">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label" for="searchKeyword">검색어 (상품명/LOT)</label>
                            <input type="text" class="form-control" id="searchKeyword" placeholder="검색어 입력">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label d-block">&nbsp;</label>
                            <button type="button" class="btn btn-primary w-100" id="btnSearchHistory">검색</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Grid Container -->
        <div class="card">
            <h5 class="card-header">이력 목록</h5>
            <div class="card-body">
                <div id="historyGrid"></div>
            </div>
        </div>
    </div>
</th:block>

<th:block layout:fragment="myScript">
    <script>
        // Simple Grid Initialization for History (Inline for now or move to separate JS)
        document.addEventListener('DOMContentLoaded', function () {
            const grid = new tui.Grid({
                el: document.getElementById('historyGrid'),
                scrollX: false,
                scrollY: false,
                columns: [
                    { header: '일시', name: 'date', align: 'center' },
                    { header: '유형', name: 'type', align: 'center' },
                    { header: '상품명', name: 'prodName' },
                    { header: 'LOT 번호', name: 'lotNo', align: 'center' },
                    { header: '수량', name: 'qty', align: 'right' },
                    { header: '작업자', name: 'worker', align: 'center' },
                    { header: '비고', name: 'note' }
                ],
                data: [
                    { date: '2023-11-01 10:00', type: '입고', prodName: '공병 300ml', lotNo: 'LOT-001', qty: '+100', worker: '홍길동', note: '정기 입고' },
                    { date: '2023-11-02 14:30', type: '출고', prodName: '튜브', lotNo: 'LOT-001', qty: '-20', worker: '김철수', note: '생산 투입' },
                    { date: '2023-11-05 09:15', type: '폐기', prodName: '에탄올 1L', lotNo: 'LOT-002', qty: '-5', worker: '이영희', note: '파손' }
                ]
            });
        });
    </script>
</th:block>

</html>