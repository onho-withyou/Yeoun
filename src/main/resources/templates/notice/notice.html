<th:block xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layouts/layout.html}">
<head>
	<style type="text/css">
		.img-btn {
			width: 15px;
			height: 15px;
			vertical-align: middle;
		}
	</style>
</head>
<body>
	<th:block layout:fragment="content">
		<div class="custom-body container-xxl flex-grow-1 container-p-y">
			<div class="d-flex justify-content-between">
			<input type="hidden" th:value="${#authentication.name}" id="currentUserId">
			<input type="hidden" th:value="${#authentication.principal.empName}" id="currentUserName">
			<form class="d-flex" style="max-width: 300px;">
				<input class="form-control me-2" type="search" placeholder="제목&내용 입력" aria-label="Search" name="searchKeyword" th:value="${searchKeyword}">
				<button class="btn btn-outline-primary" type="submit">Search</button>
			</form>
			<button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#create-notice">글쓰기</button>
			</div>
			<br>
			<!-- Basic Bootstrap Table -->
			<div class="card">
			    <div class="table-responsive text-nowrap">
			        <table class="table">
			            <thead>
			                <tr>
			                    <th data-key="noticeId" onclick="allineTable(this)" style="width:1%;">
			                    	번호<i id="sort-icon-noticeId" class="fa-solid fa-sort sort-icon"></i>
			                    </th>
			                    <th data-key="noticeTitle" onclick="allineTable(this)"style="width:30%;">
			                    	제목<i id="sort-icon-noticeId" class="fa-solid fa-sort sort-icon"></i>
			                    </th>
			                    <th style="width:5%;">작성자</th>
			                    <th data-key="createdDate" onclick="allineTable(this)" style="width:5%;">
			                    	등록일<i id="sort-icon-noticeId" class="fa-solid fa-sort sort-icon"></i>
			                    </th>
			                    <th data-key="updatedDate" onclick="allineTable(this)"style="width:5%;">
			                    	수정일<i id="sort-icon-noticeId" class="fa-solid fa-sort sort-icon"></i>
			                    </th>
			                    <th style="width:5%;">상세</th>
			                </tr>
			            </thead>
			            <tbody class="table-border-bottom-0">
			            	<th:block th:each="notice : ${noticeDTOList}">
				                <tr th:style="${notice.noticeYN == 'Y'} ? 'background-color: #008dff1a;' : ''">
				                	<td th:text="${notice.noticeId}"></td>
				                	<td th:text="${notice.noticeTitle}"></td>
				                	<td th:text="${notice.empName}"></td>
				                	<!-- 로컬데이트타임은 #temporals.format사용 -->
									<td th:text="${#temporals.format(notice.createdDate,'yyyy-MM-dd HH:mm')}"></td>
									<td th:text="${#temporals.format(notice.updatedDate,'yyyy-MM-dd HH:mm')}"></td>
				                	<td>
			                            <button type="button" class="btn btn-primary btn-sm" th:data-notice-id="*{notice.noticeId}">
			                                상세
			                            </button>
				                	</td>
				                </tr>
			                </th:block>
			            </tbody>
			        </table>
			    </div>
			    <div>
					<div class="layout-demo-info" style="display: flex; justify-content: center;">
						<nav aria-label="Page navigation" >
							<ul class="pagination ">
								<li class="page-item first" th:classappend="${currentPage == 0} ? 'disabled'">
									<a class="page-link" th:href="@{/notices(page=0, searchKeyword=${searchKeyword}, orderKey=${orderKey}, orderMethod=${orderMethod})}"><i class="tf-icon bx bx-chevrons-left"></i></a>
								</li>
								<li class="page-item prev" th:classappend="${currentPage == 0} ? 'disabled'">
									<a class="page-link" th:href="@{/notices(page=${currentPage - 1}, searchKeyword=${searchKeyword}, orderKey=${orderKey}, orderMethod=${orderMethod})}"><i class="tf-icon bx bx-chevron-left"></i></a>
								</li>
								<!-- 앞뒤로 2페이지씩 보이기 -->
								<li class="page-item"
								    th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
								    th:if="${i >= currentPage - 2 and i <= currentPage + 2}"
								    th:classappend="${i == currentPage} ? 'active'">
								    <a class="page-link" th:href="@{/notices(page=${i}, searchKeyword=${searchKeyword}, orderKey=${orderKey}, orderMethod=${orderMethod})}" th:text="${i + 1}"></a>
								</li>
								<li class="page-item next" th:classappend="${currentPage + 1 >= totalPages} ? 'disabled'">
									<a class="page-link" th:href="@{/notices(page=${currentPage + 1}, searchKeyword=${searchKeyword}, orderKey=${orderKey}, orderMethod=${orderMethod})}"><i class="tf-icon bx bx-chevron-right"></i></a>
								</li>
								<li class="page-item last" th:classappend="${currentPage + 1 >= totalPages} ? 'disabled'">
									<a class="page-link" th:href="@{/notices(page=${totalPages - 1}, searchKeyword=${searchKeyword}, orderKey=${orderKey}, orderMethod=${orderMethod})}"><i class="tf-icon bx bx-chevrons-right"></i></a>
								</li>
							</ul>
						</nav>
					</div>
			    </div>
			</div>
			<!--/ Basic Bootstrap Table -->
			<th:block th:insert="~{notice/notice_modal}"></th:block>
		</div>
		<!-- custombody 끝 -->	
		<script src="/js/notice/notice.js"></script>
	</th:block>
</body>
