<th:block xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:fragment="notice_modal">
			
<!-- 공지쓰기모달 -->
<div class="modal fade" id="create-notice" tabindex="-1" style="display: none;" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<!-- 모달 제목 -->
			<div class="modal-header">
				<h5 class="modal-title" id="modalCenterTitle"><font dir="auto" style="vertical-align: inherit;">
					<font dir="auto" style="vertical-align: inherit;">공지사항 쓰기</font></font>
				</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫다"></button>
			</div>
			<!-- 모달 본문 -->
			<div class="modal-body">
				<form id="notice-write-form" th:action="@{/notices}" method="post" enctype="multipart/form-data">
					<div class="mb-3" style="display:flex; gap:8px;">
					    <input type="text" class="form-control" id="notice-title-write" name="noticeTitle" placeholder="제목" style="flex:1;">
					    <label class="form-check-label" for="fixedCheck">고정</label>
					    <input class="form-check-input" type="checkbox" name="noticeYN" value="Y">
					</div>
				    <div class="mb-3">
				        <textarea id="notice-content-write" name="noticeContent" class="form-control" rows="10" placeholder="공지사항 내용 작성"></textarea>
				    </div>
				    <div>
						<label for="notice-files-write" class="form-label">파일 첨부</label>
						<input class="form-control" type="file" id="notice-files-write" name="noticeFiles" multiple>
						<div id="fileFieldWrite"></div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
					<font dir="auto" style="vertical-align: inherit;"><font dir="auto" style="vertical-align: inherit;">
						닫기
					</font></font>
				</button>
				<button type="submit" class="btn btn-primary" form="notice-write-form">
					<font dir="auto" style="vertical-align: inherit;"><font dir="auto" style="vertical-align: inherit;">글 쓰기</font></font>
				</button>
			</div>
		</div>
	</div>
</div>
<!-- /공지쓰기모달 -->

<!-- 공지조회모달 -->
<div class="modal fade" id="show-notice" tabindex="-1" style="display: none;" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<!-- 모달 제목 -->
			<div class="modal-header">
				<h5 class="modal-title" id="modalCenterTitle"><font dir="auto" style="vertical-align: inherit;">
					<font dir="auto" style="vertical-align: inherit;">공지사항 조회</font></font>
				</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫다"></button>
			</div>
			<!-- 모달 본문 -->
			<div class="modal-body">
				<form id="notice-form-read" action="" >
					<div class="mb-3" style="display:flex; gap:8px;">
					    <input type="hidden" class="form-control" id="notice-id-read" name="noticeId">
					    <input type="hidden" class="form-control" id="notice-createdUser-read" name="createdUser">
					    <input type="text" class="form-control" id="notice-title-read" name="noticeTitle" placeholder="제목" style="flex:1;">
					    <label class="form-check-label" for="fixed-check">고정</label>
					    <input class="form-check-input" type="checkbox" value="Y" id="fixed-check" name="noticeYN" onchange="toggleValue(this)">
					</div>
					<div class="d-flex align-items-center mb-3 justify-content-between">
						<div class="d-flex ">
							<span class="" >등록자 : </span>
							<span class="ml-2" id="notice-writer-read">테스트</span>
						</div>
						<div class="d-flex ml-auto">
						    <div class="d-flex mr-3">
						      <span>등록일 : </span>
						      <span id="notice-createdDate-read" class="ml-2"></span>
						    </div>
						    <div class="d-flex">
						      <span>수정일 : </span>
						      <span id="notice-updatedDate-read" class="ml-2"></span>
						    </div>
						</div>
					</div>
				    <div class="mb-3">
				        <textarea id="notice-content-read" class="form-control" rows="10" placeholder="공지사항 내용 작성" name="noticeContent"></textarea>
				    </div>
				    <div>
				    	<span>첨부파일<br>(최대5개)</span>
				    	<div class="itemImg oldFile" th:each="itemImgDTO : *{itemImgDTOList}">
							<!-- 1) img 태그로 서버상의 이미지 리소스에 직접 접근 -->
							<!-- => 클라이언트에서 정적 리소스 요청 시 기본적으로 루트(/)가 static 경로를 가리킴 -->
<!-- 								<img th:src="@{/images/1.jpg}" width="100" height="100" /> -->
							<!-- => 즉, src/main/resources/static/images 경로상의 리소스를 서버측으로 요청 -->
							
							<!-- 단, 클라이언트가 요청 불가능한 경로(정적 리소스 경로 제외)에 파일 업로드가 이루어지므로 -->
							<!-- 별도의 추가 설정을 통해 서버측으로 요청한 정보를 해석하고 실제 파일 위치를 탐색해야함 -->
							<!-- 2) 클라이언트에서 요청할 URL 을 가상의 축약 경로를 사용하여 요청하고 -->
							<!--    서버측에서 축약 경로에 대한 실제 경로로 변환하게 해당 요청 처리 후 응답 -->
							<!--    => 컨트롤러 측에서 별도의 매핑은 불필요하며 WebConfig 파일에 변환 처리 코드로 처리됨 -->
<!-- 								<img th:src="@{/files{imgLocation}/{imgName}(imgLocation=${itemImgDTO.imgLocation}, imgName=${itemImgDTO.imgName})}" title="/files 요청" width="100" height="100" /> -->
							
							<!-- ================================================================= -->
							<!-- [ 첨부파일 다운로드 ] -->
							<!-- 1) HTML5 에서 제공하는 하이퍼링크 download 속성 활용하여 클라이언트가 해당 리소스 다운로드를 직접 요청 후 처리 -->
<!-- 								<span th:text="${itemImgDTO.originalImgName}"></span> -->
<!-- 								<a th:href="@{/files{imgLocation}/{imgName}(imgLocation=${itemImgDTO.imgLocation}, imgName=${itemImgDTO.imgName})}" th:download="${itemImgDTO.originalImgName}"> -->
<!-- 									<input type="button" class="btn-download" value="다운로드"> -->
<!-- 								</a> -->
							
							<!-- 2) 클라이언트 상에서 실제 파일명을 노출시키지 않고 아이디값만으로 서버측으로 다운로드 요청을 전송하여 -->
							<!--    서버측에서 요청에 따른 파일 전송 처리까지 수행하는 방법(= 다운로드 횟수 누적 등의 부가 작업도 처리 가능) -->
							<!--    => 컨트롤러에서 처리 필요! -->
							<span th:text="${itemImgDTO.originalImgName}"></span>
							<a th:href="@{/items/download/{id}(id=${itemImgDTO.id})}">
<!-- 									<input type="button" class="btn-download" value="다운로드"> -->
								<img th:src="@{/images/download-icon.png}" class="img_btn" title="다운로드" />
							</a>
							<!-- 주의! 자바스크립트 함수 호출 시 타임리프 객체를 전달하려면 문자열 결합처럼 || 기호로 감싸야함 -->
<!-- 								<a href="javascript:void(0)" th:onclick="|deleteFile(${itemImgDTO.id})|"> -->
							<a href="javascript:void(0)" onclick="deleteFile(this)" th:data-id="${itemImgDTO.id}">
								<img th:src="@{/images/delete-icon.png}" class="img_btn" title="삭제" />
							</a>
						</div>
						<div id="uploadArea">
							<label for="notice-files-read" class="form-label">파일 첨부</label>
							<input class="form-control" type="file" id="notice-files-read" name="noticeFiles" multiple>
							<div id="fileFieldRead"></div>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
					<font dir="auto" style="vertical-align: inherit;"><font dir="auto" style="vertical-align: inherit;">
						닫기
					</font></font>
				</button>
				<button type="button" class="btn btn-danger btn-outline-secondary" data-bs-dismiss="modal" id="notice-delete">
					<font dir="auto" style="vertical-align: inherit;"><font dir="auto" style="vertical-align: inherit;">
						삭제
					</font></font>
				</button>
				<button type="submit" class="btn btn-primary" id="notice-modify" form="notice-form-read">
					<font dir="auto" style="vertical-align: inherit;"><font dir="auto" style="vertical-align: inherit;">
					수정</font></font>
				</button>
			</div>
		</div>
	</div>
</div>

<script src="/js/notice/notice_modal.js"></script>
<!-- /공지조회모달 -->
