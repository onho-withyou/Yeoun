<th:block xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layouts/layout.html}">
<head>
</head>
<body>
	<div class="custom-body container-xxl flex-grow-1 container-p-y" layout:fragment="content">
		<h3>나의 출퇴근 현황</h3>
		<div class="d-flex justify-content-between">
			<div class="col-12 col-lg-auto d-flex flex-wrap align-items-center gap-3">
				<div class="d-flex align-items-center gap-2">
					<input type="date" class="form-control" id="startDate" style="width: 140px;"/>
					<span>~</span>
					<input type="date" class="form-control" id="endDate" style="width: 140px;">
				</div>
                <div>
	             	<button class="btn btn-primary" type="button" id="searchbtn">조회</button>
                </div>
			</div>
			<div class="d-flex">
	            <div class="mb-6 ms-2 mb-0">
					<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalCenter">근무등록</button>
	            </div>
			</div>
		</div>
		<div class="card mt-4">
			<div class="table-responsive text-nowrap">
				<div id="grid" ></div>
			</div>
		</div>
		<div class="modal fade" id="modalCenter" tabindex="-1" style="display: none;" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="modalCenterTitle">외근등록</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<form id="outworkForm" th:action="@{/attendance/outwork}" method="post">
							<input type="hidden" th:value="${#authentication.name}" name="empId"/>
							<div class="col mb-6">
								<label for="inTime" class="form-label">근무날짜</label>
								<input type="date" id="inTime" class="form-control" name="accessDate"/>
								<div class="invalid-feedback">외근 날짜를 선택해주세요.</div>
							</div>
							<div class="col mb-6">
								<label class="form-label">근무유형</label>
								<select class="form-select" name="accessType">
									<option value="">선택</option>
									<option value="OUTWORK">외근</option>
								</select>
								<div class="invalid-feedback">근무유형을 선택해주세요.</div>
							</div>
							<div class="col mb-6">
								<label for="endTime" class="form-label">외근 사유</label>
								<textarea rows="2" cols="10" class="form-control" name="reason" id="reason"></textarea>
								<div class="invalid-feedback">외근 사유는 2글자 이상 입력해주세요.</div>
							</div>
							<div class="col mb-6">
								<label for="endTime" class="form-label">근무 시작시간</label>
								<input type="time" id="outTime" class="form-control" name="outTime"/>
								<div class="invalid-feedback">근무 시작시간을 입력해주세요.</div>
							</div>
							<div class="modal-footer mt-3 p-0">
								<button type="submit" class="btn btn-primary">등록</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<th:block layout:fragment="myScript">
		<script>
			const message = "[[${message}]]";
			
			if (message) {
				alert(message);
			}
		</script>
		<script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script>
		<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
		<script src="/js/attendance/attendance.js"></script>
		<script src="/js/attendance/attendanceGrid.js"></script>
	</th:block>
</body>
</th:block>