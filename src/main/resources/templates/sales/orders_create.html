<th:block xmlns:th="http://www.thymeleaf.org"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
          layout:decorate="~{layouts/layout}">

<th:block layout:fragment="content">

<style>
    #clientAutoList {
        background: white !important;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    #clientAutoList .auto-item {
        padding: 8px 12px;
        cursor: pointer;
    }
    #clientAutoList .auto-item:hover {
        background: #f0f0f0;
    }
</style>

<div class="custom-body container-xxl flex-grow-1 container-p-y">

<h3 class="mb-4">ì‹ ê·œ ìˆ˜ì£¼ ë“±ë¡</h3>

<form th:action="@{/sales/orders/create}" method="post" id="orderForm">

<!-- =====================================================
     1) ê±°ë˜ì²˜ ê²€ìƒ‰
===================================================== -->
<div class="col-md-6 position-relative">
    <label class="form-label">ê±°ë˜ì²˜</label>

    <!-- ì‹¤ì œë¡œ ì„œë²„ë¡œ ì „ë‹¬ë˜ëŠ” ê°’ -->
    <input type="hidden" name="clientId" id="clientId" />

    <!-- ê²€ìƒ‰ì°½ -->
    <input type="text"
           id="clientSearch"
           class="form-control"
           autocomplete="off"
           placeholder="ê±°ë˜ì²˜ëª… ë˜ëŠ” ì½”ë“œ ê²€ìƒ‰">

    <!-- ìë™ì™„ì„± ëª©ë¡ -->
    <div id="clientAutoList"
         class="list-group position-absolute w-100 d-none"
         style="z-index:2000; max-height:200px; overflow-y:auto;"></div>
</div>


<!-- =====================================================
     2) ê±°ë˜ì²˜ ìƒì„¸ ì •ë³´ ë°•ìŠ¤
===================================================== -->
<div id="clientInfoBox"
     class="border rounded p-3 mt-2 d-none"
     style="background:#fafafa;">

    <h6 class="fw-bold">ê±°ë˜ì²˜ ì •ë³´</h6>

    <!-- ğŸ”¥ ìš°í¸ë²ˆí˜¸(hidden) -->
    <input type="hidden" id="clientPostcode" name="dPostcode">

    <div class="row mt-2">

        <!-- ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ -->
        <div class="col-md-6">
            <label class="form-label">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</label>
            <input type="text" id="clientBizNo"
                   class="form-control" readonly>
        </div>

        <!-- ëŒ€í‘œì -->
        <div class="col-md-6">
            <label class="form-label">ëŒ€í‘œì</label>
            <input type="text" id="clientCeo"
                   class="form-control" readonly>
        </div>

        <!-- ê³ ê°ì‚¬ ë‹´ë‹¹ì -->
        <div class="col-md-6 mt-2">
            <label class="form-label">ë‹´ë‹¹ì</label>
            <input type="text" id="clientManager"
                   name="managerName" class="form-control">
                   <div class="text-danger small d-none" id="managerNameError"></div>
        </div>
    </div>

    <div class="row mt-2">
        <!-- ë‹´ë‹¹ì ì—°ë½ì²˜ -->
        <div class="col-md-6">
            <label class="form-label">ë‹´ë‹¹ì ì—°ë½ì²˜</label>
            <input type="text" id="clientManagerTel"
                   name="managerTel" class="form-control">
                   <div class="text-danger small d-none" id="managerTelError"></div>
        </div>

        <!-- ë‹´ë‹¹ì ì´ë©”ì¼ -->
        <div class="col-md-6">
            <label class="form-label">ë‹´ë‹¹ì ì´ë©”ì¼</label>
            <input type="text" id="clientManagerEmail"
                   name="managerEmail" class="form-control">
                   <div class="text-danger small d-none" id="managerEmailError"></div>
        </div>
    </div>

    <!-- ì£¼ì†Œ -->
    <div class="mt-3">
        <label class="form-label">ì£¼ì†Œ</label>
        <div class="input-group mb-1">
            <input type="text" class="form-control"
                   id="clientAddr" name="dAddress1"
                   placeholder="ì£¼ì†Œ ì…ë ¥ ë˜ëŠ” ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­">

            <button type="button"
                    class="btn btn-outline-secondary"
                    id="addrSearchBtn">
                ì£¼ì†Œ ê²€ìƒ‰
            </button>
        </div>

        <input type="text" class="form-control"
               id="clientAddrDetail" name="dAddress2"
               placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥">
    </div>

</div>



<!-- ==========================================================
     3) ë‚ ì§œ ì…ë ¥
========================================================== -->
<div class="row mb-3 mt-3">

    <div class="col-md-6">
        <label class="form-label fw-bold">ìˆ˜ì£¼ì¼ì</label>
        <input type="date"
               class="form-control"
               name="orderDate"
               id="orderDate"
               required>
    </div>

    <div class="col-md-6">
        <label class="form-label fw-bold">ë‚©ê¸°ì¼ì</label>
        <input type="date"
               class="form-control"
               name="deliveryDate"
               id="deliveryDate"
               required>

        <!-- ğŸ”¥ ì¦‰ì‹œ ê²€ì¦ ë©”ì‹œì§€ -->
        <div id="deliveryDateError"
             class="text-danger small mt-1 d-none"></div>
    </div>

</div>



<!-- =====================================================
     4) ë‚´ë¶€ ë‹´ë‹¹ì
===================================================== -->
<div class="mb-3">
    <label class="form-label fw-bold">ë‹´ë‹¹ì</label>

    <!-- í™”ë©´ ì¶œë ¥ -->
    <input type="text" class="form-control"
           th:value="|${login.empName} (${login.empId}) / ${login.deptName}|"
           readonly>

    <!-- ì„œë²„ ì „ë‹¬ -->
    <input type="hidden" name="empId" th:value="${login.empId}">
</div>



<!-- =====================================================
     5) ì œí’ˆëª©ë¡
===================================================== -->
<button type="button" class="btn btn-outline-primary btn-sm" id="addItemBtn">
    + ì œí’ˆ ì¶”ê°€
</button>

<table class="table table-bordered mt-3">
    <thead>
        <tr>
            <th style="width:25%">ì œí’ˆ</th>
            <th style="width:15%">ë‹¨ê°€</th>
            <th style="width:10%">ìµœì†Œìˆ˜ëŸ‰</th>
            <th style="width:10%">ë‹¨ìœ„</th>
            <th style="width:15%">ìˆ˜ëŸ‰</th>
            <th style="width:15%">ê¸ˆì•¡</th>
            <th style="width:10%">ì‚­ì œ</th>
        </tr>
    </thead>
    <tbody id="itemBody"></tbody>
</table>



<!-- =====================================================
     6) ë©”ëª¨
===================================================== -->
<div class="mb-3 mt-4">
    <label class="form-label fw-bold">ë©”ëª¨</label>
    <textarea class="form-control" name="orderMemo" rows="3"></textarea>
</div>

<button class="btn btn-primary mt-3">ì €ì¥</button>

</form>
</div>


<script src="/js/sales/orders_create.js"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<script th:inline="javascript">
    window.productList = /*[[${products}]]*/ [];
</script>

</th:block>
</th:block>
