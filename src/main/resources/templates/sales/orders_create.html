<th:block xmlns:th="http://www.thymeleaf.org"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
          layout:decorate="~{layouts/layout}">

<th:block layout:fragment="content">

<style>
    #clientAutoList {
        background: white !important;  /* í° ë°°ê²½ */
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    #clientAutoList .auto-item {
        padding: 8px 12px;
        cursor: pointer;
    }

    #clientAutoList .auto-item:hover {
        background: #f0f0f0;
    }
</style>

<div class="custom-body container-xxl flex-grow-1 container-p-y">

<h3 class="mb-4">ì‹ ê·œ ìˆ˜ì£¼ ë“±ë¡</h3>

<form th:action="@{/sales/orders/create}" method="post" id="orderForm">

<!-- ===================== ê±°ë˜ì²˜ ì„ íƒ ===================== -->
<div class="col-md-6 position-relative">
    <label class="form-label">ê±°ë˜ì²˜</label>

    <!-- ì„ íƒëœ ê±°ë˜ì²˜ ID ì €ì¥ìš© -->
    <input type="hidden" id="clientId" name="clientId"/>

    <!-- ê²€ìƒ‰ ì…ë ¥ì°½ (JSê°€ ì°¾ëŠ” IDì™€ ë™ì¼) -->
    <input type="text"
           id="clientSearch"
           class="form-control"
           autocomplete="off"
           placeholder="ê±°ë˜ì²˜ëª… ë˜ëŠ” ì½”ë“œë¡œ ê²€ìƒ‰"/>

    <!-- ìë™ì™„ì„± ëª©ë¡ (JSê°€ ì°¾ëŠ” IDì™€ ë™ì¼) -->
    <div id="clientAutoList"
         class="list-group position-absolute w-100 d-none"
         style="z-index:2000; max-height:200px; overflow-y:auto;"></div>
</div>


<!-- ===================== ê±°ë˜ì²˜ ì •ë³´ ë°•ìŠ¤ ===================== -->
<div id="clientInfoBox"
     class="border rounded p-3 mt-2 d-none"
     style="background:#fafafa;">

    <h6 class="fw-bold">ê±°ë˜ì²˜ ì •ë³´</h6>

    <div class="row mt-2">
     <div class="col-md-6">
            <label class="form-label">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</label>
            <input type="text" class="form-control" id="clientBizNo" readonly>
        </div>
    
        <div class="col-md-6">
            <label class="form-label">ëŒ€í‘œì</label>
            <input type="text" class="form-control" id="clientCeo" readonly>
        </div>

        <div class="col-md-6">
            <label class="form-label">ë‹´ë‹¹ì</label>
            <input type="text" class="form-control" id="clientManager">
        </div>
    </div>

    <div class="row mt-2">
        <div class="col-md-6">
            <label class="form-label">ë‹´ë‹¹ì ì—°ë½ì²˜</label>
            <input type="text" class="form-control" id="clientManagerTel">
        </div>
       
    </div>

    <div class="mt-2">
    <label class="form-label">ì£¼ì†Œ</label>

    <!-- ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ í¬í•¨ -->
    <div class="input-group mb-1">
        <input type="text"
               class="form-control"
               id="clientAddr"
               placeholder="ì£¼ì†Œë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”">
        <button type="button"
                class="btn btn-outline-secondary"
                id="addrSearchBtn">
            ì£¼ì†Œ ê²€ìƒ‰
        </button>
    </div>

    <input type="text"
           class="form-control"
           id="clientAddrDetail"
           placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥">
</div>


</div>


    <!-- ===================== ë‚ ì§œ ===================== -->
    <div class="row mb-3">
        <div class="col">
            <label class="form-label fw-bold">ìˆ˜ì£¼ì¼ì</label>
            <input type="date" class="form-control" name="orderDate" required>
        </div>
        <div class="col">
            <label class="form-label fw-bold">ë‚©ê¸°ì¼ì</label>
            <input type="date" class="form-control" name="deliveryDate" required>
        </div>
    </div>

    <!-- ===================== ë‹´ë‹¹ì ===================== -->
 <div class="mb-3">
    <label class="form-label fw-bold">ë‹´ë‹¹ì</label>

    <!-- í™”ë©´ì— ë³´ì—¬ì£¼ëŠ” ì§ì› ì •ë³´ -->
    <input type="text" class="form-control"
           th:value="|${login.empName} (${login.empId}) / ${login.deptName}|"
           readonly>

    <!-- ğŸ”¥ ì„œë²„ë¡œ ì‹¤ì œ ì „ë‹¬ë˜ëŠ” empId -->
    <input type="hidden" name="empId" th:value="${login.empId}">
</div>




    <!-- ===================== ì œí’ˆ ëª©ë¡ ì¶”ê°€ ===================== -->

    <button type="button" class="btn btn-outline-primary btn-sm" id="addItemBtn">+ ì œí’ˆ ì¶”ê°€</button>
    
		    <!-- ===================== ì œí’ˆ ëª©ë¡ í…Œì´ë¸” ===================== -->
		<table class="table table-bordered mt-3">
    <thead>
        <tr>
            <th style="width: 25%">ì œí’ˆ</th>
            <th style="width: 15%">ë‹¨ê°€</th>
            <th style="width: 10%">ìµœì†Œìˆ˜ëŸ‰</th>
            <th style="width: 10%">ë‹¨ìœ„</th>
            <th style="width: 15%">ìˆ˜ëŸ‰</th>
            <th style="width: 15%">ê¸ˆì•¡</th>
            <th style="width: 10%">ì‚­ì œ</th>
        </tr>
    </thead>
    <tbody id="itemBody"></tbody>
</table>

    

    <!-- ===================== ë©”ëª¨ ===================== -->
    <div class="mb-3 mt-4">
        <label class="form-label fw-bold">ë©”ëª¨</label>
        <textarea class="form-control" name="orderMemo" rows="3"></textarea>
    </div>

    <button class="btn btn-primary mt-3">ì €ì¥</button>

</form>
</div>


<script src="/js/sales/orders_create.js"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<script th:inline="javascript">
    window.productList = /*[[${products}]]*/ [];
</script>




</th:block>
</th:block>
