<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yeoun.messenger.mapper.MessengerMapper">

<!-- 메신저 친구목록 조회 -->
<select id="selectUsers" resultType="com.yeoun.messenger.dto.MsgStatusDTO">
	SELECT e.EMP_NAME,
		   ms.AVLB_STAT,
		   ms.AUTO_WORK_STAT,
		   ms.MANUAL_WORK_STAT,
		   ms.WORK_STAT_SOURCE,
		   ms.ONLINE_YN,
		   ms.MSG_PROFILE,
		   d.DEPT_NAME,
		   p.POS_NAME
	FROM MSG_STATUS ms
	JOIN EMP e		ON ms.EMP_ID = e.EMP_ID
	JOIN DEPT d		ON e.DEPT_ID = d.DEPT_ID
	JOIN POSITION p	ON e.POS_CODE = p.POS_CODE
	WHERE ms.EMP_ID != #{id}
	ORDER BY e.EMP_NAME ASC
</select>

</mapper>





